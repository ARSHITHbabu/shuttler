@app.on_event("startup")
@app.middleware("http")
@app.middleware("http")
@app.get("/", dependencies=[Depends(require_owner)])
@app.options("/video-stream/{filename}")
@app.get("/video-stream/{filename}", dependencies=[Depends(require_owner)])
@app.post("/upload", dependencies=[Depends(require_owner)])
@app.post("/coaches/", response_model=Coach, dependencies=[Depends(require_owner)])
@app.get("/coaches/", response_model=List[Coach], dependencies=[Depends(require_student)])
@app.get("/coaches/{coach_id}", response_model=Coach, dependencies=[Depends(require_student)])
@app.put("/coaches/{coach_id}", response_model=Coach, dependencies=[Depends(require_owner)])
@app.delete("/coaches/{coach_id}", dependencies=[Depends(require_owner)])
@app.post("/auth/login")
@app.post("/coaches/login")
@app.post("/auth/forgot-password")
@app.post("/auth/reset-password")
@app.post("/auth/refresh")
@app.get("/auth/sessions")
@app.delete("/auth/sessions/{session_id}")
@app.post("/auth/logout_all")
@app.post("/auth/logout")
@app.get("/auth/me")
@app.post("/auth/change-password")
@app.post("/owners/", response_model=Owner, dependencies=[Depends(require_owner)])
@app.get("/owners/", response_model=List[Owner], dependencies=[Depends(require_owner)])
@app.get("/owners/{owner_id}", response_model=Owner, dependencies=[Depends(require_owner)])
@app.put("/owners/{owner_id}", response_model=Owner, dependencies=[Depends(require_owner)])
@app.delete("/owners/{owner_id}", dependencies=[Depends(require_owner)])
@app.post("/owners/login")
@app.post("/owners/{owner_id}/transfer-ownership", dependencies=[Depends(require_owner)])
@app.post("/batches/", response_model=Batch, dependencies=[Depends(require_owner)])
@app.get("/batches/", response_model=List[Batch], dependencies=[Depends(require_student)])
@app.get("/batches/inactive/", response_model=List[Batch], dependencies=[Depends(require_student)])
@app.get("/batches/coach/{coach_id}", response_model=List[Batch], dependencies=[Depends(require_student)])
@app.put("/batches/{batch_id}", response_model=Batch, dependencies=[Depends(require_owner)])
@app.delete("/batches/{batch_id}", dependencies=[Depends(require_owner)])
@app.post("/batches/{batch_id}/deactivate", dependencies=[Depends(require_owner)])
@app.post("/batches/{batch_id}/activate", dependencies=[Depends(require_owner)])
@app.delete("/batches/{batch_id}/remove", dependencies=[Depends(require_owner)])
@app.get("/batches/{batch_id}/available-students", dependencies=[Depends(require_student)])
@app.post("/batches/{batch_id}/students/{student_id}", dependencies=[Depends(require_owner)])
@app.delete("/batches/{batch_id}/students/{student_id}", dependencies=[Depends(require_owner)])
@app.post("/students/", response_model=Student, dependencies=[Depends(require_coach)])
@app.get("/students/", response_model=List[Student], dependencies=[Depends(require_student)])
@app.get("/students/{student_id}", response_model=Student, dependencies=[Depends(require_student)])
@app.put("/students/{student_id}", response_model=Student)
@app.delete("/students/{student_id}", dependencies=[Depends(require_coach)])
@app.get("/students/inactive/", response_model=List[Student], dependencies=[Depends(require_student)])
@app.get("/students/rejoin-requests/", response_model=List[Student], dependencies=[Depends(require_student)])
@app.post("/students/{student_id}/deactivate", dependencies=[Depends(require_coach)])
@app.post("/students/{student_id}/request-rejoin", dependencies=[Depends(require_coach)])
@app.post("/students/{student_id}/approve-rejoin", dependencies=[Depends(require_coach)])
@app.delete("/students/{student_id}/remove", dependencies=[Depends(require_coach)])
@app.get("/students/{student_id}/profile-complete", dependencies=[Depends(require_student)])
@app.post("/students/login")
@app.post("/batch-students/", dependencies=[Depends(require_owner)])
@app.get("/batch-students/{batch_id}", dependencies=[Depends(require_owner)])
@app.get("/student-batches/{student_id}", response_model=List[Batch], dependencies=[Depends(require_owner)])
@app.delete("/batch-students/{batch_id}/{student_id}", dependencies=[Depends(require_owner)])
@app.get("/attendance/", response_model=List[Attendance], dependencies=[Depends(require_student)])
@app.post("/attendance/", response_model=Attendance)
@app.post("/attendance/bulk/", response_model=List[Attendance])
@app.get("/attendance/batch/{batch_id}/date/{date}", dependencies=[Depends(require_student)])
@app.get("/attendance/student/{student_id}", dependencies=[Depends(require_student)])
@app.post("/coach-attendance/", response_model=CoachAttendance, dependencies=[Depends(require_coach)])
@app.get("/coach-attendance/", dependencies=[Depends(require_student)])
@app.get("/coach-attendance/coach/{coach_id}", dependencies=[Depends(require_student)])
@app.get("/coach-attendance/date/{date}", dependencies=[Depends(require_student)])
@app.post("/fees/", response_model=Fee, dependencies=[Depends(require_owner)])
@app.get("/fees/student/{student_id}", dependencies=[Depends(require_student)])
@app.get("/fees/batch/{batch_id}", dependencies=[Depends(require_student)])
@app.get("/fees/", response_model=List[Fee], dependencies=[Depends(require_student)])
@app.put("/fees/{fee_id}", response_model=Fee, dependencies=[Depends(require_owner)])
@app.post("/fees/{fee_id}/checkout", dependencies=[Depends(require_student)])
@app.post("/fees/{fee_id}/verify-payment", dependencies=[Depends(require_student)])
@app.post("/fees/{fee_id}/payments/", response_model=FeePayment, dependencies=[Depends(require_owner)])
@app.get("/fees/{fee_id}/payments/", response_model=List[FeePayment], dependencies=[Depends(require_student)])
@app.delete("/fees/{fee_id}/payments/{payment_id}", dependencies=[Depends(require_owner)])
@app.post("/coach-salaries/", response_model=CoachSalary, dependencies=[Depends(require_owner)])
@app.get("/coach-salaries/", response_model=List[CoachSalary], dependencies=[Depends(require_owner)])
@app.put("/coach-salaries/{salary_id}", response_model=CoachSalary, dependencies=[Depends(require_owner)])
@app.delete("/coach-salaries/{salary_id}", dependencies=[Depends(require_owner)])
@app.post("/sessions/", response_model=Session, dependencies=[Depends(require_owner)])
@app.get("/sessions/", response_model=List[Session], dependencies=[Depends(require_student)])
@app.get("/sessions/{session_id}", response_model=Session, dependencies=[Depends(require_student)])
@app.put("/sessions/{session_id}", response_model=Session, dependencies=[Depends(require_owner)])
@app.delete("/sessions/{session_id}", dependencies=[Depends(require_owner)])
@app.get("/sessions/{session_id}/batches", response_model=List[Batch], dependencies=[Depends(require_student)])
@app.get("/batches/{batch_id}/students", response_model=List[Student], dependencies=[Depends(require_student)])
@app.post("/fees/{fee_id}/notify", dependencies=[Depends(require_owner)])
@app.get("/performance/student/{student_id}", dependencies=[Depends(require_student)])
@app.get("/performance/grouped/student/{student_id}", dependencies=[Depends(require_student)])
@app.get("/performance/grouped/all", dependencies=[Depends(require_student)])
@app.get("/performance/grouped/coach/{coach_name}", dependencies=[Depends(require_student)])
@app.get("/performance/", response_model=List[PerformanceFrontend], dependencies=[Depends(require_student)])
@app.get("/performance/completion-status", dependencies=[Depends(require_coach)])
@app.get("/performance/{record_id}", response_model=PerformanceFrontend, dependencies=[Depends(require_student)])
@app.post("/performance/", response_model=PerformanceFrontend)
@app.put("/performance/{record_id}", response_model=PerformanceFrontend)
@app.delete("/performance/{record_id}", dependencies=[Depends(require_coach)])
@app.get("/performance/completion-status", dependencies=[Depends(require_coach)])
@app.post("/bmi/", response_model=BMI, dependencies=[Depends(require_owner)])
@app.get("/bmi/student/{student_id}", dependencies=[Depends(require_owner)])
@app.get("/bmi-records/", response_model=List[BMI], dependencies=[Depends(require_student)])
@app.get("/bmi-records/{record_id}", response_model=BMI, dependencies=[Depends(require_student)])
@app.post("/bmi-records/", response_model=BMI, dependencies=[Depends(require_coach)])
@app.put("/bmi-records/{record_id}", response_model=BMI, dependencies=[Depends(require_coach)])
@app.delete("/bmi-records/{record_id}", dependencies=[Depends(require_coach)])
@app.post("/enquiries/", response_model=Enquiry, dependencies=[Depends(require_owner)])
@app.get("/enquiries/", response_model=List[Enquiry], dependencies=[Depends(require_owner)])
@app.get("/enquiries/assigned/{assigned_to}", dependencies=[Depends(require_owner)])
@app.put("/enquiries/{enquiry_id}", response_model=Enquiry, dependencies=[Depends(require_owner)])
@app.delete("/enquiries/{enquiry_id}", dependencies=[Depends(require_owner)])
@app.post("/schedules/", response_model=Schedule, dependencies=[Depends(require_coach)])
@app.get("/schedules/batch/{batch_id}", dependencies=[Depends(require_student)])
@app.get("/schedules/date/{date}", dependencies=[Depends(require_student)])
@app.delete("/schedules/{schedule_id}", dependencies=[Depends(require_coach)])
@app.post("/tournaments/", response_model=Tournament, dependencies=[Depends(require_coach)])
@app.get("/tournaments/", response_model=List[Tournament], dependencies=[Depends(require_student)])
@app.get("/tournaments/upcoming", dependencies=[Depends(require_student)])
@app.delete("/tournaments/{tournament_id}", dependencies=[Depends(require_coach)])
@app.post("/video-resources/upload", dependencies=[Depends(require_coach)])
@app.get("/video-resources/", dependencies=[Depends(require_student)])
@app.get("/video-resources/{video_id}", dependencies=[Depends(require_student)])
@app.delete("/video-resources/{video_id}", dependencies=[Depends(require_coach)])
@app.post("/coach-invitations/", response_model=CoachInvitation, dependencies=[Depends(require_owner)])
@app.get("/coach-invitations/", response_model=List[CoachInvitation], dependencies=[Depends(require_owner)])
@app.get("/coach-invitations/{coach_email}", dependencies=[Depends(require_owner)])
@app.get("/coach-invitations/token/{invite_token}", dependencies=[Depends(require_owner)])
@app.put("/coach-invitations/{invitation_id}", dependencies=[Depends(require_owner)])
@app.post("/invitations/", response_model=Invitation, dependencies=[Depends(require_owner)])
@app.get("/invitations/pending", response_model=List[Invitation], dependencies=[Depends(require_owner)])
@app.get("/invitations/student/{student_email}", dependencies=[Depends(require_owner)])
@app.get("/invitations/coach/{coach_id}", dependencies=[Depends(require_owner)])
@app.put("/invitations/{invitation_id}", dependencies=[Depends(require_owner)])
@app.get("/analytics/dashboard", dependencies=[Depends(require_owner)])
@app.get("/analytics/coach/{coach_id}", dependencies=[Depends(require_owner)])
@app.post("/api/announcements/", response_model=Announcement, dependencies=[Depends(require_coach)])
@app.get("/api/announcements/", response_model=List[Announcement], dependencies=[Depends(require_student)])
@app.get("/api/announcements/{announcement_id}", response_model=Announcement, dependencies=[Depends(require_student)])
@app.put("/api/announcements/{announcement_id}", response_model=Announcement, dependencies=[Depends(require_coach)])
@app.delete("/api/announcements/{announcement_id}", dependencies=[Depends(require_coach)])
@app.post("/api/calendar-events/", response_model=CalendarEvent, dependencies=[Depends(require_coach)])
@app.get("/api/calendar-events/", response_model=List[CalendarEvent], dependencies=[Depends(require_student)])
@app.get("/api/calendar-events/{event_id}", response_model=CalendarEvent, dependencies=[Depends(require_student)])
@app.put("/api/calendar-events/{event_id}", response_model=CalendarEvent, dependencies=[Depends(require_coach)])
@app.delete("/api/calendar-events/{event_id}", dependencies=[Depends(require_coach)])
@app.post("/leave-requests/", response_model=LeaveRequest, dependencies=[Depends(require_coach)])
@app.get("/leave-requests/", response_model=List[LeaveRequest], dependencies=[Depends(require_coach)])
@app.get("/leave-requests/{request_id}", response_model=LeaveRequest, dependencies=[Depends(require_coach)])
@app.put("/leave-requests/{request_id}", response_model=LeaveRequest, dependencies=[Depends(require_owner)])
@app.patch("/leave-requests/{request_id}", response_model=LeaveRequest, dependencies=[Depends(require_owner)])
@app.delete("/leave-requests/{request_id}", dependencies=[Depends(require_owner)])
@app.post("/leave-requests/{request_id}/modify", response_model=LeaveRequest, dependencies=[Depends(require_coach)])
@app.put("/leave-requests/{request_id}/review-modification", response_model=LeaveRequest, dependencies=[Depends(require_owner)])
@app.post("/students/registration-request", response_model=StudentRegistrationRequest, dependencies=[Depends(require_coach)])
@app.get("/student-registration-requests/", response_model=List[StudentRegistrationRequest], dependencies=[Depends(require_owner)])
@app.get("/student-registration-requests/{request_id}", response_model=StudentRegistrationRequest, dependencies=[Depends(require_owner)])
@app.put("/student-registration-requests/{request_id}", response_model=StudentRegistrationRequest, dependencies=[Depends(require_owner)])
@app.get("/students/check-registration-status/{email}", dependencies=[Depends(require_student)])
@app.post("/coaches/registration-request", response_model=CoachRegistrationRequest, dependencies=[Depends(require_owner)])
@app.get("/coach-registration-requests/", response_model=List[CoachRegistrationRequest], dependencies=[Depends(require_owner)])
@app.get("/coach-registration-requests/{request_id}", response_model=CoachRegistrationRequest, dependencies=[Depends(require_owner)])
@app.put("/coach-registration-requests/{request_id}", response_model=CoachRegistrationRequest, dependencies=[Depends(require_owner)])
@app.get("/coaches/check-registration-status/{email}", dependencies=[Depends(require_student)])
@app.post("/api/upload/image", dependencies=[Depends(require_owner)])
@app.get("/uploads/{filename}", dependencies=[Depends(require_owner)])
@app.get("/api/notifications/{user_id}", response_model=List[Notification], dependencies=[Depends(require_student)])
@app.put("/api/notifications/{notification_id}/read", dependencies=[Depends(require_student)])
@app.put("/api/notifications/read-all", dependencies=[Depends(require_student)])
@app.delete("/api/notifications/{notification_id}", dependencies=[Depends(require_coach)])
@app.get("/api/notifications/preferences", response_model=NotificationPreferences, dependencies=[Depends(require_student)])
@app.put("/api/notifications/preferences", response_model=NotificationPreferences, dependencies=[Depends(require_student)])
@app.post("/api/reports/generate", dependencies=[Depends(require_coach)])
@app.post("/api/reports/history", dependencies=[Depends(require_coach)])
@app.get("/api/reports/history", dependencies=[Depends(require_coach)])
@app.post("/admin/trigger-cleanup", dependencies=[Depends(require_owner)])
@app.post("/admin/trigger-backup", dependencies=[Depends(require_owner)])
@app.get("/health")
@app.get("/health/db")
@app.get("/health/redis")
